!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).html2ast={})}(this,(function(t){"use strict";let e={},n={};function r(t){45===t&&(m({type:3,content:O(n.sectionStart,n.currentIndex)}),n.state=23)}function c(t){if(45===t){for(n.state=28;++n.currentIndex<n.currentInput.length;)if(45!==n.currentInput.charCodeAt(n.currentIndex)){n.sectionStart=n.currentIndex;break}}else n.state=23}function a(t){(62===t||function(t){for(;++n.currentIndex<n.currentInput.length;)if(n.currentInput.charCodeAt(n.currentIndex)===t)return!0;return n.currentIndex=n.currentInput.length-1,!1}(62))&&(n.state=1,n.sectionStart=n.currentIndex+1)}function u(t){n.state=45===t?25:23}function s(t){t===n.currentAttrValueQuote&&(n.currentProp.value=O(n.sectionStart,n.currentIndex),n.currentOpenTag.props.push(n.currentProp),n.sectionStart=-1,n.state=11)}function o(t){34!==t&&39!==t||(n.currentAttrValueQuote=t,n.state=19,n.sectionStart=n.currentIndex+1)}function i(t){var e,r;(61===t||b(t))&&(e=n.sectionStart,r=n.currentIndex,n.currentProp={type:6,value:void 0,name:O(e,r)},function(t){n.state=17,n.sectionStart=n.currentIndex,f(t)}(t))}function f(t){61===t?n.state=18:(62===t||47===t||k(t))&&(n.currentOpenTag.props.push(n.currentProp),n.currentProp=null,n.state=11,n.sectionStart=-1,S(t))}function p(t){60===t&&(n.currentIndex>n.sectionStart&&function(t){let r=n.stack[0]||e,c=r.children[r.children.length-1];c&&2===c.type?c.content+=t:r.children.push({type:2,content:t})}(O(n.sectionStart,n.currentIndex)),n.sectionStart=n.currentIndex,n.state=5)}function d(t){(62===t||k(t))&&(y(),n.state=10,l(t))}function l(t){62===t&&(n.state=1,n.sectionStart=n.currentIndex+1)}function I(t){k(t)||(n.state=x(t)?9:27,n.sectionStart=n.currentIndex)}function g(t){33===t?(n.state=22,n.sectionStart=n.currentIndex+1):63===t?n.state=23:x(t)?(n.sectionStart=n.currentIndex,n.state=6):47===t?n.state=8:(n.state=1,p(t))}function x(t){return t>=97&&t<=122||t>=65&&t<=90}function h(t){var e;b(t)&&(e=t,function(t,e){let r=n.currentInput.slice(t,e);n.currentOpenTag={type:1,tag:r,props:[],children:[],content:""}}(n.sectionStart,n.currentIndex),n.state=11,n.sectionStart=-1,S(e))}function k(t){return 32===t||10===t||9===t||12===t||13===t}function b(t){return 47===t||62===t||k(t)}function S(t){62==t?(n.selfClosingTags.has(n.currentOpenTag.tag)?A(n.currentOpenTag):T(n.currentOpenTag),n.state=1,n.sectionStart=n.currentIndex+1):47==t?n.state=7:k(t)||(n.sectionStart=n.currentIndex,n.state=12)}function T(t){m(t),n.stack.unshift(t),n.currentOpenTag=null}function m(t){(n.stack[0]||e).children.push(t)}function y(){let t=O(n.sectionStart,n.currentIndex),e=n.stack,r=e[0];r&&r.tag===t&&e.shift()}function O(t,e){return n.currentInput.slice(t,e)}function P(t){62===t?(A(n.currentOpenTag),n.state=1):k(t)||(n.state=11,S(t))}function A(t){const e=n.currentOpenTag.tag;T(t),n.stack[0]&&n.stack[0].tag===e&&y(n.stack.shift())}t.parse=function(t,x){e={type:"Program",children:[],content:""},n={state:1,currentOpenTag:null,currentProp:null,currentInput:"",currentAttrValueQuote:"",sectionStart:0,currentIndex:0,stack:[],selfClosingTags:new Set(["meta","img","br","hr","input","link","base","source","track","area","col","wbr","embed","param","keygen","command"])};let k=t.length;for(n=Object.assign(n,{currentInput:t},x);n.currentIndex<k;){let e=t[n.currentIndex].charCodeAt();switch(n.state){case 1:p(e);break;case 5:g(e);break;case 6:h(e);break;case 7:P(e);break;case 8:I(e);break;case 9:d(e);break;case 10:l(e);break;case 11:S(e);break;case 12:i(e);break;case 17:f(e);break;case 18:o(e);break;case 19:s(e);break;case 22:u(e);break;case 23:a(e);break;case 25:c(e);break;case 28:r(e)}n.currentIndex++}return e}}));
